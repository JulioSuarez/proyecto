let h=document.getElementById("ip_mensaje"),p=document.getElementById("butom_ia"),o=document.getElementById(" bt_mostrar_video"),_=document.getElementById("div_control_videos"),a=0,i="";const d="bnVzdGlqaWtub0BndWZ1bS5jb20:adFca_o7gfTMrl79dQgOa",u="https://imgfz.com/i/QgIHbXC.jpeg";let l="",r="";a==0?(l="es-MX-GerardoNeural",r=u):(l="es-MX-DaliaNeural",r=u);console.log("hola desde ia_mover_cara.js");async function v(){try{const e={script:{type:"text",input:h.value,provider:{type:"microsoft",voice_id:l,voice_config:{style:"Cheerful"}}},config:{stitch:!0,driver_expressions:{expressions:[{start_frame:0,expression:"surprise",intensity:1}]}},source_url:r};o.classList.remove("hidden"),o.classList.remove("btn-green"),o.classList.add("btn-red");let t=document.createElement("div");t.className="border-2 rounded-lg bg-blue-600 h-28 w-28 text-center flex justify-center items-center font-bold",t.textContent="Subiendo Imagen...";let c=document.createElement("img");t.appendChild(c),_.appendChild(t),o.textContent="Subiendo Imagen...",await fetch("https://api.d-id.com/talks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+d},body:JSON.stringify(e)}).then(s=>s.json()).then(async s=>{o.textContent="Procesando video...",t.textContent="Procesando video...",t.classList.remove("bg-blue-600"),c.src="https://i.pinimg.com/550x/b6/a3/d0/b6a3d082786c2b16f28d24ddf7cb88f2.jpg",i=s.id,console.log("id_video:",i);let m="procesando";for(;m!=="done";)console.log(),await new Promise(n=>setTimeout(n,5e3)),await fetch("https://api.d-id.com/talks/"+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+d}}).then(n=>n.json()).then(n=>{console.log("respuesta:",n.status),m=n.status,n.status=="done"?(videos.push(n.result_url),o.textContent="Reproduciendo...",o.classList.remove("btn-red"),o.classList.add("btn-green"),t.textContent="",t.classList.remove("bg-blue-600"),t.classList.add("bg-red-500")):console.warn("EL VIDEO SIGUE EN PROCESO")});console.log("termine de cargar")}).catch(s=>{console.log("entre al error:",s)}),console.log("fin xd xd")}catch(e){console.error("Error al realizar el POST:",e)}}p.addEventListener("click",async function(){v()});let g=document.getElementById("img_hombre"),b=document.getElementById("img_mujer");document.getElementById("bt_hombre").addEventListener("click",function(){console.log("click en hombre"),a=0,b.classList.remove("border-blue-600"),g.classList.add("border-blue-600")});document.getElementById("bt_mujer").addEventListener("click",function(){console.log("click en mujer"),a=1,g.classList.remove("border-blue-600"),b.classList.add("border-blue-600")});o.addEventListener("click",async function(){console.log("click en mostrar video"),await fetch("https://api.d-id.com/talks/"+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+d}}).then(e=>e.json()).then(e=>{console.log("respuesta:",e.status),e.status=="done"?(mp4_video=e.result_url,console.log("mp4_video:",mp4_video),ia_video.src=e.result_url,ia_video.classList.remove("hidden"),document.getElementById("xdxd").classList.add("hidden")):console.warn("EL VIDEO SIGUE EN PROCESO")}),console.log("termine de cargar")});
