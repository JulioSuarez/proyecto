let h=document.getElementById("ip_mensaje"),_=document.getElementById("butom_ia"),b=document.getElementById("div_control_videos"),c=0,s="";const m="cG9meWl5dXJkZUBndWZ1bS5jb20:RyEfp8jXahGuofx_hKlrJ",u="https://imgfz.com/i/QgIHbXC.jpeg";let l="",a="";c==0?(l="es-MX-GerardoNeural",a=u):(l="es-MX-DaliaNeural",a=u);console.log("hola desde ia_mover_cara.js");async function y(){try{const r={script:{type:"text",input:h.value,provider:{type:"microsoft",voice_id:l,voice_config:{style:"Cheerful"}}},config:{stitch:!0,driver_expressions:{expressions:[{start_frame:0,expression:"surprise",intensity:1}]}},source_url:a};let n=document.createElement("div");n.className="relative border-2 rounded-lg h-28 w-28 text-center flex justify-center items-center font-bold";let t=document.createElement("span");t.className="absolute",t.textContent="Subiendo Imagen...";let i=document.createElement("img");i.className="h-28 w-28 opacity-80 border-2 rounded-lg",n.appendChild(i),n.appendChild(t),b.appendChild(n),await fetch("https://api.d-id.com/talks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+m},body:JSON.stringify(r)}).then(o=>o.json()).then(async o=>{t.textContent="Procesando video...",s=o.id,console.log("id_video:",s);let d="procesando";for(;d!=="done";)console.log(),await new Promise(e=>setTimeout(e,5e3)),await fetch("https://api.d-id.com/talks/"+s,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+m}}).then(e=>e.json()).then(e=>{console.log("respuesta:",e.status),d=e.status,e.status=="done"?(videos.push(e.result_url),t.textContent="Listo para reproducir",i.src=e.source_url):console.warn("EL VIDEO SIGUE EN PROCESO")});console.log("termine de cargar")}).catch(o=>{console.log("entre al error:",o)}),console.log("fin xd xd")}catch(r){console.error("Error al realizar el POST:",r)}}_.addEventListener("click",async function(){y()});let g=document.getElementById("img_hombre"),p=document.getElementById("img_mujer");document.getElementById("bt_hombre").addEventListener("click",function(){console.log("click en hombre"),c=0,p.classList.remove("border-blue-600"),g.classList.add("border-blue-600")});document.getElementById("bt_mujer").addEventListener("click",function(){console.log("click en mujer"),c=1,g.classList.remove("border-blue-600"),p.classList.add("border-blue-600")});
